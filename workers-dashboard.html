<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Walker Dashboard — Pups & Parks™</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#2563EB; --primary-dark:#1E40AF; --accent:#22C55E; --accent-dark:#16A34A;
      --bg:#F8FAFC; --surface:#FFFFFF; --text:#0F172A; --muted:#64748B; --border:#E2E8F0;
      --shadow-sm:0 6px 18px rgba(2,6,23,.10); --shadow-md:0 12px 30px rgba(2,6,23,.12);
      --radius:14px; --container:1180px; --space:1rem;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:var(--bg);line-height:1.65}
    header{background:var(--primary);color:#fff;display:flex;justify-content:space-between;align-items:center;padding:.9rem 1rem;position:sticky;top:0;z-index:20;box-shadow:0 4px 16px rgba(0,0,0,.12)}
    .logo{display:flex;align-items:center;gap:.6rem;color:#fff;text-decoration:none;font-weight:800}
    .logo img{width:32px;height:32px}
    nav a{color:#fff;text-decoration:none;margin-left:.75rem;font-weight:700;opacity:.95;padding:.3rem .6rem;border-radius:10px}
    nav a:hover{opacity:1;background:rgba(255,255,255,.14)}
    .container{max-width:var(--container);margin:0 auto;padding:1.2rem}
    .grid{display:grid;grid-template-columns:280px 1fr;gap:1rem}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-md);padding:1rem}
    .sidebar .section-title{font-weight:800;margin:.25rem 0 .5rem}
    .menu{display:grid;gap:.5rem}
    .menu button{border:1px solid var(--border);background:#fff;border-radius:12px;padding:.6rem .8rem;text-align:left;cursor:pointer;font-weight:700}
    .menu button.active{border-color:#BFDBFE;background:#EFF6FF;color:#0C4A6E}
    .content{display:grid;gap:1rem}
    .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}
    .btn{border:none;border-radius:12px;padding:.7rem 1rem;font-weight:800;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff} .btn-primary:hover{background:var(--accent-dark)}
    .btn-secondary{background:#fff;color:var(--primary);border:2px solid var(--primary)} .btn-secondary:hover{background:#F3F4F6}
    .btn-ghost{background:transparent;border:1px dashed var(--border);color:var(--muted)}
    label{font-weight:700;display:block;margin:.4rem 0 .2rem}
    input,select,textarea{width:100%;border:1px solid var(--border);border-radius:12px;padding:.6rem;background:#fff;font-size:1rem}
    textarea{min-height:100px;resize:vertical}
    .avatar{width:72px;height:72px;border-radius:50%;border:3px solid var(--primary)}
    .muted{color:var(--muted)}
    .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}
    .stat{border:1px solid var(--border);border-radius:12px;padding:.8rem;text-align:center}
    .stat h3{margin:.2rem 0;font-size:1.6rem}
    .list{display:grid;gap:.6rem}
    .list-item{border:1px solid var(--border);border-radius:12px;padding:.6rem .8rem;display:flex;justify-content:space-between;align-items:center}
    .pill{border:1px solid var(--border);border-radius:999px;padding:.25rem .6rem;font-weight:700;background:#fff}
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:.4rem}
    .day{border:1px solid var(--border);border-radius:10px;padding:.6rem;text-align:center;cursor:pointer}
    .day.active{background:#DCFCE7;border-color:#86EFAC}
    .upload{display:grid;gap:.5rem}
    .media{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.6rem}
    .media .box{border:1px dashed var(--border);border-radius:12px;height:100px;display:grid;place-items:center;color:var(--muted)}
    .banner{display:flex;justify-content:space-between;align-items:center;border:1px solid #BFDBFE;background:#EFF6FF;color:#0C4A6E;border-radius:12px;padding:.6rem .8rem}
    .footer{margin-top:1rem;text-align:center;color:#93C5FD;background:#0F172A;padding:.8rem;border-radius:12px}
    @media(max-width:820px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <a class="logo" href="index.html">
      <img src="./assets/img/logo.svg" alt="Pups & Parks logo">
      <span>Pups & Parks™</span>
    </a>
    <nav>
      <a href="index.html">Home</a>
      <a href="pricing.html">Pricing</a>
      <a href="feed.html">Community Feed</a>
      <a href="profile.html">Profile</a>
      <a href="workers-dashboard.html" style="background:rgba(255,255,255,.18)">Works Dashboard</a>
    </nav>
  </header>

  <main class="container grid">
    <!-- Sidebar -->
    <aside class="sidebar card">
      <div style="display:flex;align-items:center;gap:.6rem;margin-bottom:.6rem">
        <img class="avatar" id="avatarPreview" src="./assets/img/default-avatar.png" alt="Avatar">
        <div>
          <strong id="namePreview">Your Name</strong>
          <div class="muted" id="rolePreview">Walker • City</div>
        </div>
      </div>
      <div class="stats">
        <div class="stat"><div class="muted">Earnings (30d)</div><h3 id="earnings30">£0</h3></div>
        <div class="stat"><div class="muted">Bookings</div><h3 id="bookingsCount">0</h3></div>
        <div class="stat"><div class="muted">Reviews</div><h3 id="reviewsCount">0</h3></div>
      </div>
      <hr style="border:none;border-top:1px solid var(--border);margin:.8rem 0">
      <div class="section-title">Dashboard</div>
      <div class="menu">
        <button class="active" data-tab="profile">Profile</button>
        <button data-tab="services">Services</button>
        <button data-tab="schedule">Schedule</button>
        <button data-tab="earnings">Earnings</button>
        <button data-tab="media">Media</button>
        <button data-tab="connections">Connections</button>
        <button data-tab="settings">Settings</button>
      </div>
    </aside>

    <!-- Content -->
    <section class="content">
      <!-- Trial banner -->
      <div class="banner" id="trialBanner" hidden>
        <div><strong>Free trial active</strong> — <span id="trialCountdown">7 days left</span></div>
        <button class="btn btn-secondary" id="upgradeBtn">Upgrade</button>
      </div>

      <!-- Profile -->
      <div class="card" id="tab-profile">
        <h2>Profile</h2>
        <div class="row">
          <div>
            <label for="fullName">Full name</label>
            <input id="fullName" placeholder="Jane Doe">
          </div>
          <div>
            <label for="handle">Handle</label>
            <input id="handle" placeholder="@janedoe">
          </div>
          <div>
            <label for="city">City</label>
            <input id="city" placeholder="London, UK">
          </div>
          <div>
            <label for="role">Role</label>
            <select id="role">
              <option>Walker</option>
              <option>Owner</option>
              <option>Walker & Owner</option>
            </select>
          </div>
        </div>
        <label for="bio" style="margin-top:.6rem">Bio</label>
        <textarea id="bio" placeholder="Dog lover with 5+ years experience..."></textarea>
        <div class="row">
          <div>
            <label for="avatarUrl">Avatar URL</label>
            <input id="avatarUrl" placeholder="https://.../avatar.png">
          </div>
          <div>
            <label for="verify">Verification</label>
            <select id="verify">
              <option value="false">Not verified</option>
              <option value="true">✔ Verified Walker</option>
            </select>
          </div>
        </div>
        <div style="margin-top:.6rem;display:flex;gap:.5rem">
          <button class="btn btn-primary" id="saveProfile">Save profile</button>
          <button class="btn btn-ghost" id="resetProfile">Reset</button>
        </div>
      </div>

      <!-- Services -->
      <div class="card" id="tab-services" hidden>
        <h2>Services</h2>
        <div class="row">
          <div>
            <label>Service name</label>
            <input id="svcName" placeholder="30‑min Walk">
          </div>
          <div>
            <label>Price (£)</label>
            <input id="svcPrice" type="number" min="0" step="1" placeholder="15">
          </div>
          <div>
            <label>Duration (min)</label>
            <input id="svcDuration" type="number" min="15" step="15" placeholder="30">
          </div>
        </div>
        <label>Description</label>
        <textarea id="svcDesc" placeholder="Calm, paced walk tailored to your pup"></textarea>
        <div style="margin-top:.6rem;display:flex;gap:.5rem">
          <button class="btn btn-primary" id="addService">Add service</button>
          <button class="btn btn-ghost" id="clearServices">Clear</button>
        </div>
        <div class="list" id="servicesList" style="margin-top:.8rem"></div>
      </div>

      <!-- Schedule -->
      <div class="card" id="tab-schedule" hidden>
        <h2>Schedule & availability</h2>
        <div class="row">
          <div>
            <label>Available days</label>
            <div class="calendar" id="daysGrid">
              <div class="day" data-day="Mon">Mon</div>
              <div class="day" data-day="Tue">Tue</div>
              <div class="day" data-day="Wed">Wed</div>
              <div class="day" data-day="Thu">Thu</div>
              <div class="day" data-day="Fri">Fri</div>
              <div class="day" data-day="Sat">Sat</div>
              <div class="day" data-day="Sun">Sun</div>
            </div>
          </div>
          <div>
            <label>Time window</label>
            <div class="row">
              <div>
                <label for="startTime">Start</label>
                <input id="startTime" type="time" value="09:00">
              </div>
              <div>
                <label for="endTime">End</label>
                <input id="endTime" type="time" value="18:00">
              </div>
            </div>
          </div>
        </div>
        <div style="margin-top:.6rem;display:flex;gap:.5rem">
          <button class="btn btn-primary" id="saveSchedule">Save availability</button>
          <button class="btn btn-ghost" id="clearSchedule">Clear</button>
        </div>
        <p class="muted" id="scheduleStatus" style="margin-top:.5rem"></p>
      </div>

      <!-- Earnings -->
      <div class="card" id="tab-earnings" hidden>
        <h2>Earnings</h2>
        <div class="stats">
          <div class="stat"><div class="muted">This month</div><h3 id="earningsMonth">£0</h3></div>
          <div class="stat"><div class="muted">Last month</div><h3 id="earningsLast">£0</h3></div>
          <div class="stat"><div class="muted">Total</div><h3 id="earningsTotal">£0</h3></div>
        </div>
        <div class="row" style="margin-top:.8rem">
          <div>
            <label>Log booking (£)</label>
            <input id="earnAmount" type="number" min="0" step="1" placeholder="25">
            <button class="btn btn-primary" id="addEarning" style="margin-top:.5rem">Add</button>
          </div>
          <div class="list" id="earningsList"></div>
        </div>
      </div>

      <!-- Media -->
      <div class="card" id="tab-media" hidden>
        <h2>Media</h2>
        <div class="upload">
          <label>Add image/video URL</label>
          <input id="mediaUrl" placeholder="https://...">
          <button class="btn btn-primary" id="addMedia">Add to gallery</button>
        </div>
        <div class="media" id="mediaGrid" style="margin-top:.8rem"></div>
      </div>

      <!-- Connections -->
      <div class="card" id="tab-connections" hidden>
        <h2>Connections</h2>
        <div class="row">
          <div>
            <label>Search handle</label>
            <input id="connHandle" placeholder="@alexsmith">
            <button class="btn btn-primary" id="addConnection" style="margin-top:.5rem">Follow</button>
          </div>
          <div class="list" id="connectionsList"></div>
        </div>
      </div>

      <!-- Settings -->
      <div class="card" id="tab-settings" hidden>
        <h2>Settings</h2>
        <div class="row">
          <div>
            <label>Notifications</label>
            <select id="notify">
              <option value="all">All activity</option>
              <option value="bookings">Bookings only</option>
              <option value="none">Mute</option>
            </select>
          </div>
          <div>
            <label>Public profile</label>
            <select id="visibility">
              <option value="public">Public</option>
              <option value="private">Private</option>
            </select>
          </div>
        </div>
        <div style="margin-top:.6rem;display:flex;gap:.5rem">
          <button class="btn btn-primary" id="saveSettings">Save settings</button>
          <button class="btn btn-ghost" id="resetAll">Reset all data</button>
        </div>
        <p class="muted" id="settingsStatus" style="margin-top:.5rem"></p>
      </div>

      <div class="footer">© 2025 Pups & Parks™ — Walker dashboard</div>
    </section>
  </main>

  <script>
    // Storage helpers
    const S = {
      get: (k, fallback) => { try { const v = JSON.parse(localStorage.getItem(k)); return v ?? fallback; } catch { return fallback; } },
      set: (k, v) => localStorage.setItem(k, JSON.stringify(v))
    };

    // Tabs
    const tabs = ['profile','services','schedule','earnings','media','connections','settings'];
    document.querySelectorAll('.menu button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const t = btn.getAttribute('data-tab');
        tabs.forEach(id=>{
          document.getElementById('tab-'+id).hidden = (id!==t);
        });
      });
    });

    // Trial banner demo
    (function trialBanner(){
      const banner = document.getElementById('trialBanner');
      const countdown = document.getElementById('trialCountdown');
      const upgrade = document.getElementById('upgradeBtn');
      let ends = Number(localStorage.getItem('pp_trialEndsAt')||0);
      const fmt=(ms)=>{const d=Math.max(0,Math.ceil(ms/86400000));return `${d} day${d!==1?'s':''} left`;};
      const tick=()=>{const left=ends-Date.now(); if(left>0){banner.hidden=false; countdown.textContent=fmt(left);} else banner.hidden=true;};
      if(!ends){ ends = Date.now() + 7*86400000; localStorage.setItem('pp_trialEndsAt', String(ends)); }
      tick(); setInterval(tick, 60*60*1000);
      upgrade.addEventListener('click',()=>alert('Upgrade flow coming soon.'));
    })();

    // Profile
    (function profile(){
      const data = S.get('pp_profile', {
        fullName: 'Your Name', handle: '@handle', city: 'Your City',
        role: 'Walker', bio: '', avatarUrl: './assets/img/default-avatar.png', verify: false
      });
      // Fill inputs
      ['fullName','handle','city','role','bio','avatarUrl'].forEach(id=>{
        const el=document.getElementById(id); if(el) el.value = data[id] ?? '';
      });
      document.getElementById('verify').value = String(data.verify);
      // Preview
      const namePrev=document.getElementById('namePreview');
      const rolePrev=document.getElementById('rolePreview');
      const avatarPrev=document.getElementById('avatarPreview');
      const syncPreview=()=>{ namePrev.textContent = data.fullName || 'Your Name';
        rolePrev.textContent = `${data.role} • ${data.city||'City'}`;
        avatarPrev.src = data.avatarUrl || './assets/img/default-avatar.png';
      };
      syncPreview();
      // Save / reset
      document.getElementById('saveProfile').addEventListener('click',()=>{
        data.fullName=document.getElementById('fullName').value.trim();
        data.handle=document.getElementById('handle').value.trim();
        data.city=document.getElementById('city').value.trim();
        data.role=document.getElementById('role').value;
        data.bio=document.getElementById('bio').value.trim();
        data.avatarUrl=document.getElementById('avatarUrl').value.trim();
        data.verify=document.getElementById('verify').value==='true';
        S.set('pp_profile', data); syncPreview(); alert('Profile saved.');
      });
      document.getElementById('resetProfile').addEventListener('click',()=>{
        localStorage.removeItem('pp_profile'); location.reload();
      });
    })();

    // Services
    (function services(){
      const listEl=document.getElementById('servicesList');
      const render=()=>{
        const list=S.get('pp_services',[]);
        listEl.innerHTML='';
        list.forEach((svc,i)=>{
          const row=document.createElement('div'); row.className='list-item';
          row.innerHTML=`<div><strong>${svc.name}</strong> — £${svc.price} • ${svc.duration} min<br><span class="muted">${svc.desc||''}</span></div><button class="pill" data-i="${i}">Remove</button>`;
          row.querySelector('button').addEventListener('click',()=>{
            const cur=S.get('pp_services',[]); cur.splice(i,1); S.set('pp_services',cur); render();
          });
          listEl.appendChild(row);
        });
      };
      render();
      document.getElementById('addService').addEventListener('click',()=>{
        const name=document.getElementById('svcName').value.trim();
        const price=parseFloat(document.getElementById('svcPrice').value||'0');
        const duration=parseInt(document.getElementById('svcDuration').value||'0',10);
        const desc=document.getElementById('svcDesc').value.trim();
        if(!name || price<=0 || duration<=0){ alert('Please fill service name, price, duration.'); return; }
        const cur=S.get('pp_services',[]); cur.push({name,price,duration,desc}); S.set('pp_services',cur);
        document.getElementById('svcName').value=''; document.getElementById('svcPrice').value=''; document.getElementById('svcDuration').value=''; document.getElementById('svcDesc').value='';
        render();
      });
      document.getElementById('clearServices').addEventListener('click',()=>{ localStorage.removeItem('pp_services'); render(); });
    })();

    // Schedule
    (function schedule(){
      const daysEl=document.getElementById('daysGrid');
      const status=document.getElementById('scheduleStatus');
      const data=S.get('pp_schedule',{days:[],start:'09:00',end:'18:00'});
      // init UI
      daysEl.querySelectorAll('.day').forEach(d=>{
        if(data.days.includes(d.dataset.day)) d.classList.add('active');
        d.addEventListener('click',()=>{
          const k=d.dataset.day;
          const set=new Set(S.get('pp_schedule',{days:[],start:data.start,end:data.end}).days);
          if(set.has(k)) set.delete(k); else set.add(k);
          d.classList.toggle('active');
          const updated={days:[...set],start:document.getElementById('startTime').value,end:document.getElementById('endTime').value};
          S.set('pp_schedule',updated);
        });
      });
      document.getElementById('startTime').value=data.start;
      document.getElementById('endTime').value=data.end;
      document.getElementById('saveSchedule').addEventListener('click',()=>{
        const updated={days:[...document.querySelectorAll('.day.active')].map(e=>e.dataset.day),start:document.getElementById('startTime').value,end:document.getElementById('endTime').value};
        S.set('pp_schedule',updated); status.textContent='Availability saved.'; setTimeout(()=>status.textContent='',2000);
      });
      document.getElementById('clearSchedule').addEventListener('click',()=>{ localStorage.removeItem('pp_schedule'); location.reload(); });
    })();

    // Earnings
    (function earnings(){
      const listEl=document.getElementById('earningsList');
      const monthEl=document.getElementById('earningsMonth');
      const lastEl=document.getElementById('earningsLast');
      const totalEl=document.getElementById('earningsTotal');
      const thirtyEl=document.getElementById('earnings30');
      const bookingsEl=document.getElementById('bookingsCount');
      const reviewsEl=document.getElementById('reviewsCount');

      const render=()=>{
        const items=S.get('pp_earnings',[]);
        const now=new Date(); const month=now.getMonth(); const year=now.getFullYear();
        let total=0, curMonth=0, lastMonth=0, lastMonthIdx=(month+11)%12, lastYear= month===0 ? year-1 : year;
        items.forEach(it=>{ total+=it.amount; const d=new Date(it.ts); if(d.getMonth()===month && d.getFullYear()===year) curMonth+=it.amount;
          if(d.getMonth()===lastMonthIdx && d.getFullYear()===lastYear) lastMonth+=it.amount; });
        totalEl.textContent=`£${total}`; monthEl.textContent=`£${curMonth}`; lastEl.textContent=`£${lastMonth}`;
        // 30d calc
        const cutoff=Date.now()-30*86400000; const last30=items.filter(i=>i.ts>=cutoff).reduce((s,i)=>s+i.amount,0);
        thirtyEl.textContent=`£${last30}`;
        bookingsEl.textContent=items.length;
        reviewsEl.textContent=S.get('pp_reviews',[]).length;
        // list
        listEl.innerHTML='';
        items.slice().reverse().forEach((i,idx)=>{
          const row=document.createElement('div'); row.className='list-item';
          row.innerHTML=`<div>£${i.amount} — ${new Date(i.ts).toLocaleString()} <span class="muted">${i.note||''}</span></div><button class="pill" data-i="${idx}">Remove</button>`;
          row.querySelector('button').addEventListener('click',()=>{
            const cur=S.get('pp_earnings',[]); cur.splice(cur.length-1-idx,1); S.set('pp_earnings',cur); render();
          });
          listEl.appendChild(row);
        });
      };
      render();
      document.getElementById('addEarning').addEventListener('click',()=>{
        const amt=parseFloat(document.getElementById('earnAmount').value||'0'); if(amt<=0){ alert('Enter a valid amount.'); return; }
        const cur=S.get('pp_earnings',[]); cur.push({amount:amt,ts:Date.now(),note:'Booking'}); S.set('pp_earnings',cur); document.getElementById('earnAmount').value=''; render();
      });
    })();

    // Media
    (function media(){
      const grid=document.getElementById('mediaGrid');
      const render=()=>{
        const items=S.get('pp_media',[]);
        grid.innerHTML='';
        items.forEach((url,i)=>{
          const box=document.createElement('div'); box.className='box';
          box.innerHTML=`<div style="display:grid;gap:.4rem;place-items:center"><div class="muted">${url.length>18?url.slice(0,18)+'…':url}</div><button class="pill" data-i="${i}">Remove</button></div>`;
          box.querySelector('button').addEventListener('click',()=>{
            const cur=S.get('pp_media',[]); cur.splice(i,1); S.set('pp_media',cur); render();
          });
          grid.appendChild(box);
        });
      };
      render();
      document.getElementById('addMedia').addEventListener('click',()=>{
        const url=document.getElementById('mediaUrl').value.trim(); if(!url){ alert('Add a URL.'); return; }
        const cur=S.get('pp_media',[]); cur.push(url); S.set('pp_media',cur); document.getElementById('mediaUrl').value=''; render();
      });
    })();

    // Connections
    (function connections(){
      const list=document.getElementById('connectionsList');
      const render=()=>{
        const items=S.get('pp_connections',[]);
        list.innerHTML='';
        items.forEach((h,i)=>{
          const row=document.createElement('div'); row.className='list-item';
          row.innerHTML=`<div><strong>${h}</strong></div><button class="pill" data-i="${i}">Unfollow</button>`;
          row.querySelector('button').addEventListener('click',()=>{
            const cur=S.get('pp_connections',[]); cur.splice(i,1); S.set('pp_connections',cur); render();
          });
          list.appendChild(row);
        });
      };
      render();
      document.getElementById('addConnection').addEventListener('click',()=>{
        const h=document.getElementById('connHandle').value.trim(); if(!h || !h.startsWith('@')){ alert('Use a handle like @alexsmith'); return; }
        const cur=S.get('pp_connections',[]); if(cur.includes(h)){ alert('Already following.'); return; }
        cur.push(h); S.set('pp_connections',cur); document.getElementById('connHandle').value=''; render();
      });
    })();

    // Settings
    (function settings(){
      const notify=document.getElementById('notify');
      const vis=document.getElementById('visibility');
      const status=document.getElementById('settingsStatus');
      const data=S.get('pp_settings',{notify:'all',visibility:'public'});
      notify.value=data.notify; vis.value=data.visibility;
      document.getElementById('saveSettings').addEventListener('click',()=>{
        S.set('pp_settings',{notify:notify.value,visibility:vis.value}); status.textContent='Settings saved.'; setTimeout(()=>status.textContent='',2000);
      });
      document.getElementById('resetAll').addEventListener('click',()=>{
        if(confirm('Reset all dashboard data?')){ ['pp_profile','pp_services','pp_schedule','pp_earnings','pp_media','pp_connections','pp_settings','pp_reviews','pp_trialEndsAt'].forEach(k=>localStorage.removeItem(k)); location.reload(); }
      });
    })();
  </script>
</body>
</html>
