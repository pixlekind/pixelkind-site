<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pups & Parks‚Ñ¢ ‚Äî Community Feed</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="logo"><span class="brand-mark">üêæ</span><span>Pups & Parks‚Ñ¢</span></a>
    <nav class="nav"><a href="index.html">Home</a><a href="pricing.html">Pricing</a><a href="feed.html" class="active">Community</a><a href="profile.html">Profile</a></nav>
  </header>

  <!-- Banner -->
  <section class="section-tight">
    <div class="container">
      <div class="banner banner-info">
        <div><strong>Community feed</strong> ‚Äî share walks, park tips, and pup moments.</div>
        <div class="muted">Demo mode (localStorage)</div>
      </div>
    </div>
  </section>

  <!-- Stories -->
  <section class="section-tight">
    <div class="container card">
      <div class="stories">
        <div class="story">
          <div class="story-ring"><img src="https://images.unsplash.com/photo-1517849845537-4d257902454a?q=80&w=200&auto=format&fit=crop" alt="Create story"></div>
          <p class="muted" style="font-size:.8rem;margin-top:.3rem">Create</p>
        </div>
        <div class="story"><div class="story-ring"><img src="https://images.unsplash.com/photo-1537151625747-768eb6cf92b6?q=80&w=200&auto=format&fit=crop" alt="Olima"></div><p class="muted" style="font-size:.8rem;margin-top:.3rem">Olima</p></div>
        <div class="story"><div class="story-ring"><img src="https://images.unsplash.com/photo-1543466835-00a7907e9de1?q=80&w=200&auto=format&fit=crop" alt="Ivanita"></div><p class="muted" style="font-size:.8rem;margin-top:.3rem">Ivanita</p></div>
        <div class="story"><div class="story-ring"><img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?q=80&w=200&auto=format&fit=crop" alt="Finn"></div><p class="muted" style="font-size:.8rem;margin-top:.3rem">Finn</p></div>
      </div>
    </div>
  </section>

  <!-- Composer + Feed -->
  <main class="section">
    <div class="container grid-2">
      <!-- Composer -->
      <div>
        <div class="card composer">
          <h2 class="h3">Create a post</h2>
          <label for="composerText" class="muted">Share a thought, park discovery, or pup photo (paste URL)</label>
          <textarea id="composerText" placeholder="What's on your mind?"></textarea>
          <label for="imageUrl" class="mt-2">Image URL (optional)</label>
          <input id="imageUrl" type="url" placeholder="https://...">
          <div class="composer-actions" style="display:flex;gap:.6rem;justify-content:flex-end;margin-top:var(--s3)">
            <button id="postBtn" class="btn btn-primary btn-pill">Post</button>
            <button id="clearBtn" class="btn btn-outline btn-pill">Clear demo data</button>
          </div>
        </div>
      </div>

      <!-- Feed -->
      <div>
        <div class="feed-header center" style="text-align:center">
          <h2 class="h2">Latest posts</h2>
          <p class="sub">Posts are saved locally and appear instantly.</p>
        </div>
        <div id="feed" class="feed-list mt-4"></div>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-inner container">
      <div class="footer-brand">üêæ Pups & Parks‚Ñ¢</div>
      <nav class="footer-nav"><a href="index.html">Home</a><a href="pricing.html">Pricing</a><a href="feed.html">Community</a><a href="profile.html">Profile</a></nav>
    </div>
    <p class="legal">¬© 2025 Pups & Parks‚Ñ¢. All rights reserved.</p>
  </footer>

  <!-- Feed logic -->
  <script>
    const feed = document.getElementById("feed");
    const textarea = document.getElementById("composerText");
    const imageUrl = document.getElementById("imageUrl");
    const postBtn = document.getElementById("postBtn");
    const clearBtn = document.getElementById("clearBtn");

    let posts = JSON.parse(localStorage.getItem("pp_posts")) || [
      { user:"Emily", text:"Hylands Park loop was perfect at sunset üå≥üêï", time:new Date().toLocaleString(), imageUrl:"", likes:2, comments:["Beautiful!", "Need to try this!"] },
      { user:"James", text:"Southchurch Park has shaded paths ‚Äî great for hot days.", time:new Date().toLocaleString(), imageUrl:"", likes:1, comments:[] }
    ];

    function renderFeed() {
      feed.innerHTML = "";
      posts.forEach((p,i) => {
        const imgHTML = p.imageUrl ? `<img class="post-image" src="${p.imageUrl}" alt="Post image">` : "";
        const commentsHTML = (p.comments||[]).map(c => `<div class="comment">${c}</div>`).join("");
        feed.innerHTML += `
          <div class="post-card">
            <div class="post-meta">
              <div class="avatar"></div>
              <div><strong>${p.user}</strong><br><span class="muted" style="font-size:.9rem">${p.time}</span></div>
            </div>
            <p>${p.text}</p>
            ${imgHTML}
            <div class="post-actions">
              <span class="pill" onclick="likePost(${i})">üëç Like (${p.likes||0})</span>
              <span class="pill" onclick="toggleComment(${i})">üí¨ Comment</span>
              <span class="pill" onclick="sharePost(${i})">‚Üó Share</span>
            </div>
            <div id="comments-${i}" class="comment-box" style="display:none">
              <div id="comments-list-${i}">${commentsHTML || '<div class="muted">No comments yet</div>'}</div>
              <div style="display:flex;gap:.6rem;margin-top:.6rem">
                <input id="comment-input-${i}" type="text" placeholder="Write a comment...">
                <button class="btn btn-secondary btn-pill" onclick="addComment(${i})">Post</button>
              </div>
            </div>
          </div>`;
      });
    }

    postBtn.addEventListener("click", () => {
      const text = textarea.value.trim();
      const img = imageUrl.value.trim();
      if (!text) return;
      posts.unshift({
        user:"Demo User",
        text, imageUrl:img,
        time:new Date().toLocaleString(),
        likes:0, comments:[]
      });
      localStorage.setItem("pp_posts", JSON.stringify(posts));
      textarea.value=""; imageUrl.value="";
      renderFeed();
    });

    clearBtn.addEventListener("click", () => {
      localStorage.removeItem("pp_posts");
      posts = [];
      renderFeed();
    });

    window.likePost = i => {
      posts[i].likes++;
      localStorage.setItem("pp_posts", JSON.stringify(posts));
      renderFeed();
    };

    window.toggleComment = i => {
      const box = document.getElementById("comments-"+i);
      box.style.display = box.style.display === "none" ? "block" : "none";
    };

    window.addComment = i => {
      const input = document.getElementById("comment-input-"+i);
      const val = input.value.trim();
      if(!val) return;
      posts[i].comments = posts[i].comments || [];
      posts[i].comments.push(val);
      localStorage.setItem("pp_posts", JSON.stringify(posts));
      input.value="";
      renderFeed();
      toggleComment(i); // keep it open
    };

    window.sharePost = i => {
      alert("Shared post "+(i+1));
    };

    renderFeed();
  </script>
</body>
</html>
