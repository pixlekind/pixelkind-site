<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pups & Parks‚Ñ¢ ‚Äî Community Feed</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <a href="index.html" class="logo">
      <span class="brand-mark">üêæ</span>
      <span>Pups & Parks‚Ñ¢</span>
    </a>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="pricing.html">Pricing</a>
      <a href="feed.html" class="active">Community</a>
      <a href="profile.html">Profile</a>
    </nav>
  </header>

  <!-- Banner -->
  <section class="section-tight">
    <div class="container">
      <div class="banner banner-info">
        <div><strong>Community feed</strong> ‚Äî share walks, park tips, and pup moments.</div>
        <div class="muted">Demo mode (localStorage)</div>
      </div>
    </div>
  </section>

  <!-- Stories Row -->
  <section class="section-tight">
    <div class="container card" style="display:flex;gap:1rem;overflow-x:auto;padding:1rem;">
      <div style="text-align:center;">
        <div style="width:60px;height:60px;border-radius:50%;background:#1E293B;display:flex;align-items:center;justify-content:center;font-size:2rem;">+</div>
        <p class="muted" style="font-size:0.8rem;">Story</p>
      </div>
      <div style="text-align:center;">
        <img src="https://placekitten.com/80/80" style="width:60px;height:60px;border-radius:50%;object-fit:cover;">
        <p class="muted" style="font-size:0.8rem;">Olima</p>
      </div>
      <div style="text-align:center;">
        <img src="https://placekitten.com/81/81" style="width:60px;height:60px;border-radius:50%;object-fit:cover;">
        <p class="muted" style="font-size:0.8rem;">Ivanita</p>
      </div>
    </div>
  </section>

  <!-- Composer + Feed -->
  <main class="section container">
    <div class="grid-2">
      <!-- Composer -->
      <div>
        <div class="card composer">
          <h2 class="h3">Create a post</h2>
          <textarea id="composerText" placeholder="What's on your mind?"></textarea>
          <label for="imageUrl" class="mt-2">Image URL (optional)</label>
          <input id="imageUrl" type="url" placeholder="https://...">
          <div class="composer-actions mt-3">
            <button id="postBtn" class="btn btn-primary btn-pill">Post</button>
            <button id="clearBtn" class="btn btn-outline btn-pill">Clear demo data</button>
          </div>
        </div>
      </div>

      <!-- Feed -->
      <div>
        <div class="feed-header center">
          <h2 class="h2">Latest posts</h2>
          <p class="sub">Posts are saved locally and appear instantly.</p>
        </div>
        <div id="feed" class="feed-list mt-4"></div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-inner container">
      <div class="footer-brand">üêæ Pups & Parks‚Ñ¢</div>
      <nav class="footer-nav">
        <a href="index.html">Home</a>
        <a href="pricing.html">Pricing</a>
        <a href="feed.html">Community</a>
        <a href="profile.html">Profile</a>
      </nav>
    </div>
    <p class="legal">¬© 2025 Pups & Parks‚Ñ¢. All rights reserved.</p>
  </footer>

  <!-- Feed Logic -->
  <script>
    const feed = document.getElementById("feed");
    const textarea = document.getElementById("composerText");
    const imageUrl = document.getElementById("imageUrl");
    const postBtn = document.getElementById("postBtn");
    const clearBtn = document.getElementById("clearBtn");

    let posts = JSON.parse(localStorage.getItem("pp_posts")) || [
      { user:"Emily", text:"Hylands Park loop was perfect at sunset üå≥üêï", time:new Date().toLocaleString(), imageUrl:"", likes:2 },
      { user:"James", text:"Southchurch Park has shaded paths ‚Äî great for hot days.", time:new Date().toLocaleString(), imageUrl:"", likes:1 }
    ];

    function renderFeed() {
      feed.innerHTML = "";
      posts.forEach((p,i) => {
        const imgHTML = p.imageUrl ? `<img src="${p.imageUrl}" style="width:100%;border-radius:var(--radius-md);margin-top:var(--space-3);">` : "";
        feed.innerHTML += `
          <div class="post-card">
            <div class="post-meta">
              <div class="avatar"></div>
              <div><strong>${p.user}</strong><br><span class="sub">${p.time}</span></div>
            </div>
            <p>${p.text}</p>
            ${imgHTML}
            <div class="post-actions">
              <span class="pill" onclick="likePost(${i})">üëç Like (${p.likes||0})</span>
              <span class="pill" onclick="commentPost(${i})">üí¨ Comment</span>
              <span class="pill" onclick="sharePost(${i})">‚Üó Share</span>
            </div>
          </div>`;
      });
    }

    postBtn.addEventListener("click", () => {
      if (!textarea.value.trim()) return;
      posts.unshift({
        user:"Demo User",
        text:textarea.value.trim(),
        imageUrl:imageUrl.value.trim(),
        time:new Date().toLocaleString(),
        likes:0
      });
      localStorage.setItem("pp_posts", JSON.stringify(posts));
      textarea.value=""; imageUrl.value="";
      renderFeed();
    });

    clearBtn.addEventListener("click", () => {
      localStorage.removeItem("pp_posts");
      posts = [];
      renderFeed();
    });

    window.likePost = i => { posts[i].likes++; localStorage.setItem("pp_posts", JSON.stringify(posts)); renderFeed(); }
    window.commentPost = i => alert("Comment clicked on post "+(i+1));
    window.sharePost = i => alert("Share clicked on post "+(i+1));

    renderFeed();
  </script>
</body>
</html>
